# リソースシステム

テクスチャ、音楽、テキスト、フォントなどのゲーム内リソースを管理するためのシステム。

## リソースタイプの定義

ResourceBaseを継承して行う。参照しているリソースがある場合はAddReferenceResourceで参照を追加する必要がある。
参照はLoad成功時に追加され、Dispose時にリセットされる。

## リソースの検索

リソースIDまたはPathで検索可能。リソースファイル名はパスカルケースに従う。

### リソースファイル名の接頭辞

リソースファイル名の先頭3文字はリソースタイプを表す接頭辞となる。それぞれ以下のとおり。

- Grp: 画像
- Snd: 効果音
- Msc: 音楽
- Csv: CSV
- Txt: テキスト
- Xml: XML
- Fnt: フォント
- Jsn: JSON
- Gbj: ゲームオブジェクト定義
- Gcm: ゲームコンポーネント定義(未実装)
- Efc: エフェクト
- Etx: エフェクト用テクスチャ

### ID

リソースファイル名から接頭辞を除いたものになる。
異なるリソースタイプ間では同じIDが存在し得る。

### FullID

IDにタイプ接頭辞を付けたもの。リソースファイル名から拡張子を除いたものと等しい。
全リソース間で固有の文字列。

### Path

リソースフォルダ内での、リソースフォルダを基準としたパス。例えば、リソースフォルダ内のpictureフォルダにあるgraph.pngのパスはpicture\graph.pngとなる。
各リソースファイル内で他のリソースがパスで参照されている場合は、そのリソースファイルを基準としたパスを指定する。

## メタデータファイル

各ファイルについて付加的な設定情報などを追加するためのファイル。
メタデータのファイル名は各リソースファイル名末尾に".meta.json"を加えたものとなる。
ファイル形式はJSON。

リソースの種類によってはメタデータが必須。

### フォント

メタデータ必須。

- FontName: フォントファイル内で定義されているフォント名

## リソースの自動読み込み

基本的にリソースは、シーン開始時にシーン名と同じ名前のタグを参照して読み込まれる。
シーン実行時に読み込まれていないリソースを指定した場合には、自動で読み込みが行われるが、警告が出力される。
ただし、リソース読み込み時に参照リソースとして読み込まれた場合は警告なしに自動読み込みされる。

### タグリスト

リソースディレクトリに"tag_list.json"として以下のようなJSON形式のファイルを置くことで、タグとリソースを関連付けることができる。

```json
{
    "タグ名1":["リソース1FullID","リソース1FullID",...],
    "タグ名2":["リソース2FullID","リソース3FullID",...],
    ...
}
```
