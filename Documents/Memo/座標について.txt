ゲームオブジェクト空間とUI空間とでは座標系が異なる

ゲームオブジェクト空間
x軸は右を正、y軸は上を正とする

UI空間
x軸は右を正、y軸は下を正とする


ゲームオブジェクトの親子関係と座標
　ゲームオブジェクトのトランスフォームコンポーネントはグローバル座標とローカル座標を持つ。
　通常はローカル座標を参照、変更し、衝突判定、描画処理ではグローバル座標を用いる。
　グローバル座標はシステムプロセスでローカル座標と親から求められるので、変更しても次回更新時に変更は破棄される。
　なので表示座標系の処理(ドット表示用に位置を整数値にする)などは、衝突判定プロセスと描画プロセスのあいだでプロセスを走らせれば、次のフレームでの位置変更に影響を与えない。
　……それだと衝突判定の結果も反映されないんだけど……
　ゲームオブジェクト更新後に速度適用とローカルグローバル変換、衝突判定後にグローバルローカル変換を行うようにシステムプロセスを追加した。グローバルローカル変換からローカルグローバル変換のあいだにグローバル座標に与える変更は反映されないので上記の方法は使える。
　ローカル座標、グローバル座標が変更されたときに随時グローバル座標、ローカル座標をそれぞれ更新するようにした。パフォーマンスは下がるがわかりやすい。ローカル座標グローバル座標の不整合が発生しない。また、更新が必要ない場合は更新しないなどの最適化をしたい。