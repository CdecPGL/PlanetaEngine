# Scene

シーンクラスの設定は、外部クラスSceneSetUpperが行う。
SceneSetUpperはコード定義のものも、ファイル定義のものも起動時にすべて読み込む。SceneSetUpperではシーンのセットアップ処理、終了処理、使用タグ、遷移可能シーンIDをもつ。シーンはGameObject、GameProcess、UIの三要素からなり、各々のマネージャを保持している。

## ライフサイクル

- インスタンス作成
- Scene::Initialize() //最低限の初期化
- SceneSetUpper::SetUpScene() //外部からシーンの設定(ユーザー定義)
- Scene::Update() //終了まで更新
- SceneSetUpper::FinalizeScene() //外部からシーンの終了処理(ユーザー定義)
- Scene::Finalize() //シーンん終了処理
- インスタンス破棄


現状ではSceneManagerがシーンの管理と生成の二つの役割りをになっているので、生成についてはSceneFactoryを作り、分離した方がいいかも

## 遷移先制限について

SceneSetUpperで現在のシーンから遷移可能なシーンが定義されている。

## 遷移時のオブジェクト引継ぎについて

遷移元オブジェクトは終了処理で、渡される終了パラメータと、次シーンIDから次シーンの初期化パラメータリストを作成する。

遷移先オブジェクトは遷移元が作成したシーン設定パラメータを参考にして、設定処理で引継ぎ処理などを行う。

夢幻の緑星では実装しない。

## 実装案その1

SceneSetUpper::SetUpSceneで引数に、前のシーンの各マネージャを受け取り、関数内で引継ぎ処理を行う。

ただ、プロセスを引き継いだ際に、使用されているゲームオブジェクトを引き継がなかったなどの問題が起こる可能性がある。
